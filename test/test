#! /bin/bash

echo ========== TEST lib_firesight.so =============
echo target/test 
target/test
if [ $? -ne 0 ] 
then 
	echo FAILED: target/test
	exit 1
fi

suffix=""

if [ "$WINDIR" == "" ]; then suffix=""; else suffix="-win" ; fi
test/test-one pcb.jpg backgroundSubtractorMOG2-fgMask "$suffix" "-DbgImg=img/backgroundSubtractorMOG2.jpg" 
if [ $? -ne 0 ] ; then exit 1 ; fi

if [ "$WINDIR" == "" ]; then suffix=""; else suffix="-win" ; fi
test/test-one duck.jpg resize "$suffix" "-Dfx=0.25" "-Dfy=0.5"
if [ $? -ne 0 ] ; then exit 1 ; fi

if [ "$WINDIR" == "" ]; then suffix=""; else suffix="-win" ; fi
test/test-one pcb.jpg matchAngle "$suffix" "-Dangle=[45]" "-Dtemplate=img/tmplt-37x29.jpg"
if [ $? -ne 0 ] ; then exit 1 ; fi

if [ "$WINDIR" == "" ]; then suffix=""; else suffix="-win" ; fi
test/test-one pcb.jpg matchCCOEFF_NORMED "$suffix" 
if [ $? -ne 0 ] ; then exit 1 ; fi

if [ "$WINDIR" == "" ]; then suffix=""; else suffix="-win" ; fi
test/test-one pcb.jpg match45 "$suffix"
if [ $? -ne 0 ] ; then exit 1 ; fi
